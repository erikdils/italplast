{"version":3,"sources":["webpack:///./src/components/Pages/Search/ResultsItem.jsx","webpack:///./src/components/Pages/Search/SearchBar.jsx","webpack:///./src/components/Hooks/useThrottle.js","webpack:///./src/components/Pages/Search/SearchSection.jsx","webpack:///./src/pages/search.js","webpack:///./src/components/Pages/Ui/Svg/search.svg"],"names":["ResultsItem","item","langToggle","useLanguage","className","to","fromProductSlugToUrl","slug","fluid","image","childImageSharp","titolo_en","titolo_bg","titolo_ge","titolo_it","SearchBar","value","suggestions","onChange","loading","setLoading","useState","q","setQ","throttledVal","wait","throttledValue","setThrottledValue","lastCall","useRef","Date","now","useEffect","timer","setTimeout","current","clearTimeout","useThrottle","type","e","target","onClick","length","map","index","key","SearchSection","dataSearch","language","useContext","I18nContext","i18n","query","setQuery","setSuggestions","val","filter","toLowerCase","indexOf","Search","data","t","useTranslation","title","allStrapiCatalog","nodes","React","props","createElement","defaultProps","module","exports","default"],"mappings":"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","file":"component---src-pages-search-js-14ec856244e4e9a318e3.js","sourcesContent":["import React from \"react\";\nimport Img from \"gatsby-image\";\nimport { Link } from \"gatsby-plugin-react-i18next\";\nimport { fromProductSlugToUrl } from \"../../../utils/slug\";\nimport useLanguage from \"../../Hooks/useLanguage\";\n\nconst ResultsItem = ({ item }) => {\n  const langToggle = useLanguage;\n\n  return (\n    <Link className=\"serach-link\" to={fromProductSlugToUrl(item.slug)}>\n      <Img className=\"serach-prev\" fluid={item.image.childImageSharp.fluid} />\n      <span className=\"serch-title\">\n        {langToggle(\n          item.titolo_en,\n          item.titolo_bg,\n          item.titolo_ge,\n          item.titolo_it\n        )}\n      </span>\n    </Link>\n  );\n};\n\nexport default ResultsItem;\n","import React, { useState, useEffect } from \"react\";\nimport { useThrottle } from \"../../Hooks/useThrottle\";\nimport { Trans } from \"gatsby-plugin-react-i18next\";\nimport ResultsItem from \"./ResultsItem\";\nimport SearchIcon from \"../Ui/Svg/search.svg\";\n\nexport default function SearchBar({\n  value,\n  suggestions,\n  onChange,\n  loading,\n  setLoading,\n}) {\n  const [q, setQ] = useState(\"\");\n  const throttledVal = useThrottle(q, 100);\n  const handleInputChange = e => {\n    setQ(e.target.value);\n    setLoading(true);\n  };\n\n  useEffect(() => {\n    onChange(throttledVal);\n  }, [throttledVal, onChange]);\n\n  const clearQuery = () => {\n    setQ(\"\");\n    if (loading) setLoading(false);\n  };\n\n  return (\n    <>\n      <div className=\"search-bar\">\n        <div className=\"search-bar__wrapper\">\n          <i className=\"search-icon\">\n            <SearchIcon />\n          </i>\n          <input type=\"text\" value={q} onChange={handleInputChange} />\n          <div className=\"right-side\">\n            {q && (\n              <button className=\"clear-search\" onClick={clearQuery}>\n                X\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n      <section className=\"results-section\">\n        {!loading && (\n          <div className=\"results-wrapper\">\n            <p className=\"results-counter\">\n              {\" \"}\n              <Trans>Search</Trans>: <span>{suggestions.length}</span>\n            </p>\n            {suggestions.map((item, index) => (\n              <ResultsItem key={index} item={item} />\n            ))}\n          </div>\n        )}\n      </section>\n    </>\n  );\n}\n","import { useRef, useState, useEffect } from 'react';\n\nexport const useThrottle = (value, wait) => {\n  const [throttledValue, setThrottledValue] = useState(value);\n  const lastCall = useRef(Date.now());\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (Date.now() - lastCall.current >= wait) {\n        setThrottledValue(value);\n        lastCall.current = Date.now();\n      }\n    }, wait - (Date.now() - lastCall.current));\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, wait]);\n\n  return throttledValue;\n};\n","import React, { useState, useEffect } from 'react';\nimport { useContext } from 'react';\nimport { I18nContext } from 'gatsby-plugin-react-i18next';\n\nimport SearchBar from './SearchBar';\n\nconst SearchSection = ({ dataSearch }) => {\n  const {\n    i18n: { language },\n  } = useContext(I18nContext);\n  const [query, setQuery] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n\n  useEffect(() => {\n    if (query === '') {\n      setSuggestions([]);\n    } else {\n      let val = dataSearch\n        .filter((item) => {\n          if (language === 'en') {\n            return item.titolo_en.toLowerCase().indexOf(query.toLowerCase()) !==\n              -1\n              ? true\n              : false;\n          } else if (language === 'bg') {\n            return item.titolo_bg.toLowerCase().indexOf(query.toLowerCase()) !==\n              -1\n              ? true\n              : false;\n          } else if (language === 'de') {\n            return item.titolo_ge.toLowerCase().indexOf(query.toLowerCase()) !==\n              -1\n              ? true\n              : false;\n          } else {\n            return item.titolo_it.toLowerCase().indexOf(query.toLowerCase()) !==\n              -1\n              ? true\n              : false;\n          }\n        })\n        .map((item) => item);\n      setSuggestions(val);\n    }\n    setLoading(false);\n  }, [query, dataSearch, language]);\n\n  return (\n    <section className=\"search-section\">\n      <SearchBar\n        loading={loading}\n        setLoading={setLoading}\n        value={query}\n        onChange={(val) => setQuery(val)}\n        suggestions={suggestions}\n      />\n    </section>\n  );\n};\n\nexport default SearchSection;\n","import React from 'react';\nimport { graphql } from 'gatsby';\nimport { useTranslation } from 'gatsby-plugin-react-i18next';\nimport Layout from '../components/layout';\nimport SEO from '../components/seo';\nimport '../styles/style.sass';\nimport SearchSection from '../components/Pages/Search/SearchSection';\n\nconst Search = ({ data }) => {\n  const { t } = useTranslation();\n\n\n  return (\n    <Layout>\n      <SEO title={t('Home')} />\n      <SearchSection dataSearch={data.allStrapiCatalog.nodes} />\n    </Layout>\n  );\n};\n\nexport default Search;\n\nexport const query = graphql`\n  {\n    allStrapiCatalog {\n      nodes {\n        titolo_en\n        titolo_bg\n        titolo_ge\n        titolo_it\n        slug\n        image {\n          childImageSharp {\n            fluid(maxWidth: 600) {\n              ...GatsbyImageSharpFluid_withWebp\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n","var React = require('react');\n\nfunction Search (props) {\n    return React.createElement(\"svg\",props,React.createElement(\"path\",{\"d\":\"M12.6266 11.5128L16 14.8855L14.8855 16L11.5128 12.6266C10.2579 13.6325 8.69706 14.1797 7.08871 14.1774C3.17574 14.1774 0 11.0017 0 7.08871C0 3.17574 3.17574 0 7.08871 0C11.0017 0 14.1774 3.17574 14.1774 7.08871C14.1797 8.69706 13.6325 10.2579 12.6266 11.5128ZM11.0466 10.9284C12.0462 9.90047 12.6044 8.52254 12.6021 7.08871C12.6021 4.04214 10.1345 1.57527 7.08871 1.57527C4.04214 1.57527 1.57527 4.04214 1.57527 7.08871C1.57527 10.1345 4.04214 12.6021 7.08871 12.6021C8.52254 12.6044 9.90047 12.0462 10.9284 11.0466L11.0466 10.9284Z\",\"fill\":\"#BFD4F5\"}));\n}\n\nSearch.defaultProps = {\"width\":\"16\",\"height\":\"16\",\"viewBox\":\"0 0 16 16\",\"fill\":\"none\"};\n\nmodule.exports = Search;\n\nSearch.default = Search;\n"],"sourceRoot":""}